# MidiGenshinMusicPlayer
## midi文件所在的文件路径以及midi文件的文件名不得包含中文，否则会导致显示乱码以及程序崩溃(发生在试图播放 文件名乱码 的.mid文件时 以及 文件路径 中 包含中文 时播放任意.mid文件)
## 如果releases发行的版本无法运行请下源代码载到本地用Visual Studio2022编译
![输入图片说明](README_Photos/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-07-22%20112814.png)
![include文件夹的路径可能需要手动修改](README_Photos/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-07-22%20112849.png)
![res文件夹内的文件如果没有自动导入的话就在资源文件那里手动导入现有项](README_Photos/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-07-22%20113423.png)

# releases发行的版本不是所有Windows版本可用

# 请使用管理员身份运行，要不然原神识别不到键盘事件信号（就是没反应）

# 杀毒软件报毒的话添加信任就行，因为代码中有WindowsAPI的调用，报毒是正常的

# 1.自己下载的Midi文件最好用MuseScore改为C大调
![输入图片说明](README_Photos/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-07-22%20115231.png)
![输入图片说明](README_Photos/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-07-22%20115245.png)
![输入图片说明](README_Photos/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-07-22%20115256.png)
# 2.然后适当修改，如果有升降调的音符和超出原神琴的21个音的音符会被忽略
![输入图片说明](README_Photos/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-07-22%20115015.png)
#### 音域示例.mscz从MuseScore4导出的音域示例.mid文件如下
```
4d 54 68 64 //MThd（Midi文件）标志
00 00 00 06 //头块数据大小
00 01       //midi格式标志，此处为0001格式
00 02       //2个Track Chunk
01 e0
4d 54 72 6b //MTrk开始标志
00 00 00 a0 //MTrk数据段大小
00 ff 03 06 e9 92 a2 e7 90 b4 00 ff 58 04 04 02
18 08 00 ff 59 02 00 00 00 ff 51 03 07 a1 20 00
b0 79 00 00 c0 00 00 b0 07 64 00 0a 40 00 5b 00
00 5d 00 00 ff 21 01 00 9a 20 90 3c 50 83 5f 3c
00 01 3e 50 83 5f 3e 00 01 40 50 83 5f 40 00 01
41 50 83 5f 41 00 01 43 50 83 5f 43 00 01 45 50
83 5f 45 00 01 47 50 83 5f 47 00 01 48 50 83 5f
48 00 01 4a 50 83 5f 4a 00 01 4c 50 83 5f 4c 00
01 4d 50 83 5f 4d 00 01 4f 50 83 5f 4f 00 01 51
50 83 5f 51 00 01 53 50 83 5f 53 00 01
ff 2f 00     //MTrk结束
4d 54 72 6b  //MTrk开始标志
00 00 00 4b  //MTrk数据段大小
00 ff 03 06 e9 92 a2 e7 90 b4 00 ff 59 02 00 00
00 ff 21 01 00 00 90 30 50 83 5f 30 00 01 32 50
83 5f 32 00 01 34 50 83 5f 34 00 01 35 50 83 5f
35 00 01 37 50 83 5f 37 00 01 39 50 83 5f 39 00
01 3b 50 83 5f 3b 00 01
ff 2f 00     //MTrk结束
```
```
.1（即C下方八度）对应MIDI hex键号30
.2（即D下方八度）对应MIDI hex键号32
.3（即E下方八度）对应MIDI hex键号34
.4（即F下方八度）对应MIDI hex键号35
.5（即G下方八度）对应MIDI hex键号37
.6（即A下方八度）对应MIDI hex键号39
.7（即B下方八度）对应MIDI hex键号3B

1（即C）对应MIDI hex键号3C
2（即D）对应MIDI hex键号3E
3（即E）对应MIDI hex键号40
4（即F）对应MIDI hex键号41
5（即G）对应MIDI hex键号43
6（即A）对应MIDI hex键号45
7（即B）对应MIDI hex键号47

1.（即C上方八度）对应MIDI hex键号48
2.（即D上方八度）对应MIDI hex键号4A
3.（即E上方八度）对应MIDI hex键号4C
4.（即F上方八度）对应MIDI hex键号4D
5.（即G上方八度）对应MIDI hex键号4F
6.（即A上方八度）对应MIDI hex键号51
7.（即B上方八度）对应MIDI hex键号53
```

